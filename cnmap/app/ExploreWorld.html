<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Force latest IE rendering engine or ChromeFrame if installed -->
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <![endif]-->
    <meta charset="utf-8">
    <title>jQuery File Upload Demo</title>
    <meta name="description"
          content="File Upload widget with multiple file selection, drag&amp;drop support, progress bars, validation and preview images, audio and video for jQuery. Supports cross-domain, chunked and resumable file uploads and client-side image resizing. Works with any server-side platform (PHP, Python, Ruby on Rails, Java, Node.js, Go etc.) that supports standard HTML form file uploads.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap styles -->
    <link rel="stylesheet" href="bower_components/sass-bootstrap/dist/css/bootstrap.css">

    <script src="bower_components/jquery/jquery.js"></script>
    <script src="bower_components/jquery.rest/dist/jquery.rest.min.js"></script>
    <!-- Bootstrap theme -->
    <link href="bower_components/sass-bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">

<!--    <script type="text/javascript" src="bower_components/blueimp-tmpl/js/tmpl.min.js"></script>
    <script type="text/javascript" src="bower_components/jquery-bbq/jquery.ba-bbq.js"></script>-->

    <!-- angularjs -->
    <script type="text/javascript" src="bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script type="text/javascript" src="bower_components/angular-resource/angular-resource.js"></script>
    <script type="text/javascript" src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script type="text/javascript" src="bower_components/angular-route/angular-route.js"></script>
    <script type="text/javascript" src="bower_components/angular-ui-utils/event.js"></script>
    <script type="text/javascript" src="bower_components/angular-ui-mapgaode/src/ui-map.js"></script>
    <script type="text/javascript" src="scripts/services/main.js"></script>
    <script type="text/javascript" src="scripts/controllers/ExploreWorldCtrl.js"></script>

    <!-- Map vendor -->
    <script type="text/javascript" src="scripts/panor/panoramio/cnmap.comm.js"></script>
    <script type="text/javascript" src="scripts/panor/panoramio/cnmap.Panoramio.js"></script>

    <script src="http://webapi.amap.com/maps?v=1.2&key=53f7e239ddb8ea62ba552742a233ed1f" type="text/javascript"></script>
    <script type="text/javascript" src="scripts/panor/panoramio/cnmap.gaode.js"></script>
    <script type="text/javascript" src="scripts/panor/js/cnmap.gaode.js"></script>
    <script type="text/javascript" src="scripts/panor/js/explore/cnmap.explore.gaode.js"></script>
    <script type="text/javascript" src="scripts/panor/js/jQuery.parseParams.js"></script>

    <!--<script type="text/javascript" src="panor/panoramio/cnmap.baidu.js"></script>
    <script type="text/javascript" src="panor/js/cnmap.baidu.js"></script>
    <script type="text/javascript" src="panor/js/explore/cnmap.explore.baidu.js"></script>
    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=41cd06c76f253eebc6f322c863d4baa1"></script>-->

<!--    <script charset="utf-8" src="http://map.qq.com/api/js?v=2.0"></script>
    <script type="text/javascript" src="panor/panoramio/cnmap.qq.js"></script>
    <script type="text/javascript" src="panor/js/cnmap.qq.js"></script>
    <script type="text/javascript" src="panor/js/explore/cnmap.explore.qq.js"></script>-->

    
    <!-- Custom styles for this template -->
    <link href="styles/ExploreWorld.css" rel="stylesheet">

    <script type="text/javascript">
        // var ctx = "http://115.28.21.165:8080";
        var ctx = "http://127.0.0.1:8080/panor-web";
        var apirest = ctx + "/api/rest";
        var login = true;
        var userId = "1";

        $(document).ready(function () {
//            map = $.cnmap.initMap("map-canvas", {
//                toolbar: true,
//                scrollzoom: true,
//                maptype: true,
//                overview: true,
//                locatecity: true
//            });
//            setPanoramioLayer(map);
//
//            function setPanoramioLayer(map) {
//                var panoramioLayer = new cnmap.PanoramioLayer(
//                        {suppressInfoWindows: true,
//                         mapVendor: window.mapVendor || "gaode"});
//                panoramioLayer.initEnv(ctx);
//                panoramioLayer.setMap(map);
//
//                $(panoramioLayer).bind("data_changed", function(e, data) {
//                    angular.element($('.col-info')).scope().$apply(function(scope) {
//                        scope.updatePhoto(data);
//                    });
//                })
//            }

//            $.explore(map);

            $(window).trigger( 'hashchange' );
        })
    </script>
</head>

<body>

<div class="container container-main" ng-app="exploreWorldApp" ng-controller="ExploreWorldCtrl">
    <div class="col-main">
        <div id="map-canvas" ui-map="myMap" ui-options="mapOptions"></div>
    </div>
    <div class="col-info" >
        <div id="thumbinnerarea">
            <ul id="tabs" class="nav nav-pills">
                <li id="tab_li_1" data-ng-class="{active: tabs.map}">
                    <a data-ng-click="setPanormaioType('map')" tab="1" href="">热门照片<span style="display:none" class="total_photos"> (2294)</span>
                        <img class="loading" src="images/loading-p.gif" alt="读取中" style="display: none;">
                    </a>
                </li>
                <li id="tab_li_2">
                    <a set="recent" order="popularity" tab="2" kml_text="Google 地球中的最新照片" kml_link="/kml/?recent" href="/map/?set=recent&amp;order=popularity">最新照片<span style="display:none" class="total_photos"></span>
                        <img class="loading hide" src="images/loading-p.gif" alt="读取中">
                    </a>
                </li>
                <li id="tab_li_7">
                    <a set="places" order="popularity" tab="7" kml_text="谷歌地球里这个地方在所有的照片。" kml_link="/kml/?place=place_id" href="/map/?set=places&amp;order=popularity">地点<span style="display:none" class="total_photos"></span>
                        <img class="loading hide" src="images/loading-p.gif" alt="读取中">
                    </a>
                </li>
                <li id="tab_li_8" data-ng-class="{active: tabs.favorite}">
                    <a data-ng-click="setPanormaioType('favorite')" href="">收藏<span style="display:none" class="total_photos"></span>
                        <img class="loading hide" src="images/loading-p.gif" alt="读取中">
                    </a>
                </li>
                <li id="tab_li_4" data-ng-class="{active: tabs.user}">
                    <a data-ng-click="setPanormaioType('user')" href="">您的照片<span style="display:none" class="total_photos"></span>
                        <img class="loading hide" src="images/loading-p.gif" alt="读取中">
                    </a>
                </li>
            </ul>

            <div id="preview">
                <div class="preview_thumb_area" ng-repeat="photo in photos" id="pid{{photo.photoId}}" style="height: 112px;">
                    <a href="photo/{{photo.photoId}}">
                        <img title=""
                             id="r{{photo.photoId}}"
                             ng-src="{{apirest}}/photo/{{photo.photoId}}/2">
                    </a>
                </div>
            </div>
            <ul class="pager">
                <li class="previous" ng-hide="photoStart"><a href ng-click="prePhoto()">&larr; Older</a></li>
                <li class="next" ng-hide="photoEnd"><a href ng-click="nextPhoto()">Newer &rarr;</a></li>
            </ul>
        </div>
    </div>
</div>
</body>
  