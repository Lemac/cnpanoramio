"use strict";angular.module("ponmApp",["ngCookies","ngResource","ngSanitize","ngRoute","ponmApp.services","ponmApp.directives","ponmApp.controllers"]).config(["$routeProvider","$logProvider",function(a,b){b.debugEnabled=!0}]).run(["$rootScope","$window",function(a,b){a.user=b.login?{id:b.userId,loggedIn:!0}:{loggedIn:!1}}]),angular.module("ponmApp.controllers",["ponmApp"]),angular.module("ponmApp.directives",["ngResource"]).directive("contenteditable",["$parse",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){b.css("color","grey"),b.html(b.placeholder)}function f(){b.css("color",""),b.css("height",b.height()),b.html("")}b.placeholder=c.placeHolder,b.on("blur",function(){c.multipleLine?(b.css("height","1.5em"),b.css("overflow","hidden"),a.$apply(function(){if(b.placeholder!=b.html()){var a="",c=b.contents();angular.forEach(c,function(b){a=b instanceof String?a+"\n\r"+b:a+"\n\r"+angular.element(b).text()}),d.$setViewValue(a)}d.$render()})):a.$apply(function(){b.placeholder!=b.html()&&d.$setViewValue(b.html()),d.$render()})}),b.on("focus",function(){a.$apply(function(){b.placeholder==b.html()&&f()}),c.multipleLine&&b.css("height",(c.multipleLine||4)+"em")}),d.$render=function(){d.$viewValue?b.html(d.$viewValue):e()},d.$render(),c.editable&&!a.$eval(c.editable)&&(b.on("input",function(a){b.html(d.$viewValue),a.preventDefault(),a.stopPropagation()}),b.on("keypress keydown keyup onchange",function(a){a.preventDefault(),a.stopPropagation()})),c.multipleLine||b.on("keypress",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation())})}}}]).directive("itemPicker",["$parse","$log",function(a,b){return{restrict:"EA",require:"ngModel",scope:{loadData:"&",newData:"&",itemValueName:"@"},templateUrl:"views/travelPickerView.html",link:function(a,c,d,e){function f(){if(a.loadData){var c;(c=a.loadData())?(h=c(function(a){h=a,g()}),g()):b.error("load-data function "+d.loadData+" is not defined!")}else b.error("load-data attribute is not defined!")}function g(){a.items=[],angular.forEach(h,function(b,c){a.items.push(angular.isObject(b)?{value:b[a.itemValueName],$key:c}:{value:b,$key:c})})}a.itemValueName=a.itemValueName||"value";var h=null,i=[],j=c.find("div.dropdown-toggle");j.on("focus",function(){h||(f(),a.$apply(function(){return a.items}))}),angular.element(".dropdown-menu").on("click",function(a){a.preventDefault(),a.stopPropagation()}),a.setItem=function(b){if(a.multipleSelect){i=[];var c=[];b.$active=!b.$active,a.item="",angular.forEach(a.items,function(a){a.$active&&(i.push(h[a.$key]),c.push(a.value))}),a.item=c.join(d.multipleSelect||",")}else{if(b.$active)return;a.item=b.value,angular.forEach(a.items,function(a){a.$active=!1}),b.$active=!0,i=h[b.$key]}a.originalItemValue=a.item,e.$setViewValue(i)},a.clearItems=function(){a.originalItemValue="",a.item="",a.items=null},a.$watch("item",function(b){b!=a.originalItemValue&&angular.forEach(a.items,function(a){a.$active=!1})}),a.createData=function(b){b&&a.newData&&(h=a.newData()(b,function(b){h=b,a.newItem="",g()}))&&(a.newItem="",a.clearItems(),g())},a.multipleSelect=void 0===d.multipleSelect||"false"===d.multipleSelect?!1:!0}}}]),angular.module("ponmApp.services",["ngResource"]).factory("CommentService",["$window","$resource",function(a,b){return b(a.apirest+"/comment/:commentId",{commentId:"@id"},{})}]).factory("UserPhoto",["$window","$resource",function(a,b){return b(a.apirest+"/user/:userId/photos/:type/:tag/:pageSize/:pageNo",{userId:"@id"},{query:{method:"GET",isArray:!0},getByTag:{method:"GET",params:{type:"tag"}}})}]).factory("UserService",["$window","$resource",function(a,b){return b(a.apirest+"/user/:userId/:type/:value",{userId:"@id"},{getMe:{method:"GET"},getOpenInfo:{method:"GET",params:{type:"openinfo"}},getSettings:{method:"GET",params:{type:"settings"}},updateSettings:{method:"POST",params:{type:"settings"}},getTravels:{method:"GET",params:{type:"travel"}},getTags:{method:"GET",params:{type:"tag"}},createTag:{method:"GET",params:{type:"tag"}}})}]).factory("PhotoService",["$window","$resource",function(a,b){return b(a.apirest+"/photo/:photoId/:type/:pageSize/:pageNo",{photoId:"@id"},{getCameraInfo:{method:"GET",params:{type:"camerainfo"}},"delete":{method:"DELETE"},tag:{method:"POST",params:{type:"tag"}},updateProperties:{method:"POST",params:{type:"properties"}},getPhoto:{method:"GET"},getGPSInfo:{method:"GET",params:{type:"gps"}},favorite:{method:"PUT",params:{type:"favorite"}},removeFavorite:{method:"DELETE",params:{type:"favorite"}},getComments:{method:"GET",params:{type:"comment"}}})}]).service("GPSConvertService",["$window","$resource",function(a,b){return b(a.apirest+"/gps",{},{convert:{method:"GET",headers:{Accept:"application/json"}}})}]).service("AvatarService",["$window","$resource",function(a,b){return b(a.apirest+"/user/avatar",{},{upload:{method:"POST",headers:{"Content-Type":!1,Accept:"application/json"}}})}]).factory("TravelService",["$window","$resource",function(a,b){return b(a.apirest+"/travel/:travelId/:type",{travelId:"@id"},{create:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"}},addPhoto:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"}},getTravel:{method:"GET",headers:{Accept:"application/json"}}})}]).service("LoginUserService",["$window","$resource","$rootScope",function(a,b,c){this.getUserId=function(){return c.user.id}}]);